# 闭包

## 什么闭包？

一个引用了另一个函数作用域中变量的函数

下面来看两个例子

例子1：
```javascript
function func (num) {
  return function () {
    num++
    console.log(num)
  }
}
const add = func(3)
add() // 4
add() // 5
```

当我们去调用add时，它都会更新存储在其词法作用域中的同一个变量(来自其父函数的num)

例子2：
```javascript
let double = (function () {
  let temp = 1234
  return function a () {
    return temp = temp * 2
  }
})()

let a = double() // temp为 2468
let b = double() // temp为 4936
console.log(a, b) // a ==== 2468, b === 4936
```
每次去调用double的时候，内部的temp值并不会初始化，因为在函数a中用到了temp这个变量，所以当函数执行完，其内部的变量不会被回收。

著名的斐波那契数列就可以用闭包来处理
```javascript
const demo = (function() {
  const temp = {}
  return function find(n) {
    if (n === 1 || n === 0) {
      return 1
    } else if (temp[n]) {
      return temp[n]
    } else {
      temp[n] = find(n-1) + find(n-2)
      return temp[n]
    }
  }
})()
```