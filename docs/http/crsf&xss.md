## 前端应该知道的网络安全知识

#### `XSS`

`Cross Site Scripting` 跨站脚本攻击

通过在 存在安全漏洞的web网站注册用户的浏览器内 运行非法的`HTML`标签或者`js` 来进行的一种攻击

攻击方式：

1. 存储型，通过 input 输入的方式，存储到数据库中，每次打开页面都会执行。
2. 反射型，通过`url`参数攻击，假设网站`url`中携带的内容会渲染到页面，黑客可以通过在`url`的参数中放入脚本进行攻击。

`XSS`能做什么？

1. 获取页面数据
2. 获取Cookies
3. 修改前端逻辑
4. 发送请求
5. 获取用户的信息和登录态
6. 欺骗用户

如何防止？

1. 在请求头中设置响应头`X-XSS-Protection`，只能拦截`url`中存在注入攻击的情况。

   - 值为0，允许`XSS`攻击
   - 值为1，禁止`XSS`攻击，如果检测到跨站脚本攻击，浏览器将清除页面中不安全的部分

   通常浏览器默认设置为1，禁止`XSS`攻击

2. `CSP` (Content Security Policy) ，本质就是建立白名单

3. 转义字符

4. Cookie设置 `HttpOnly`



#### `CSRF`

`Cross Site Request Forgery` 跨站请求伪造

利用用户已登录的身份，在用户毫不知情的情况下，以用户的名义来完成非法操作。

攻击方式：

用户已经登录了站点A, 并且在A站点记录了登录状态(cookie)，再次进来不需要登录了。在用户没有登出站点A的情况下，也就是登录态还有效时，访问了恶意攻击者提供的引诱危险站点B, B站点调用A站点的某个接口，比如说提交接口。如果A站点没有做任何的CSRF防御，就会被攻击。

原理也很简单，因为B站点调用了A站点的提交接口，根据cookie匹配原则，调用哪个站点的接口就会携带哪个站点的cookie，携带的就是用户存在A站点的cookie，这个时候提交接口传递的参数实际上是B站点提供的。在用户无意识的情况下以用户的身份调用了接口。

很多人可能会觉得，B站点调用A站点的接口跨域了啊，那怎么行。这没什么，跨域只是一种说法而已一般的跨域是前端拿不到接口的返回值，但不代表请求发不出去，这种攻击只要请求发出去了就达到攻击的目的了，返回值什么的都无所谓了。

如何防止？

1. 禁止第三方网站携带cookie，但是有兼容性问题。
2. 验证请求传递过来的referrer，判断是否合法，也算是兼容性的问题。
3. 验证码或者人机交互，是目前最有效的方法。



